{% extends "base.html" %}

{% block content %}
    <h1>Страны для иммиграции</h1>

    <div style="overflow-y: hidden; margin-right: 15px;"  id="countries_header">
        <table class="table table-bordered" style="background-color: white;">
            <thead>
                <tr>
                    <th rowspan="2">Страна</th>
                    <th colspan="5">Типы виз</th>
                    <th colspan="3">Индексы <small>(меньше - лучше)</small></th>
                    <th colspan="2">Температура</th>
                    <th colspan="2">Природа</th>
                </tr>
                <tr>
                    <th>Бизнес</th>
                    <th>Инвестиции</th>
                    <th>Рантье</th>
                    <th>Visa-run</th>
                    <th>Специалист</th>
                    <th><a href="https://ru.wikipedia.org/wiki/Международный_индекс_счастья">Счастья</a></th>
                    <th><a href="http://en.wikipedia.org/wiki/Legatum_Prosperity_Index">Prosperity</a></th>
                    <th><a href="http://en.wikipedia.org/wiki/World_Health_Organization_ranking_of_health_systems_in_2000">WHO rank</a></th>
                    <th>Летом</th>
                    <th>Зимой</th>
                    <th>Горы</th>
                    <th>Море</th>
                </tr>
            </thead>
            <tbody>
                {% for c in country_list %}
                    <tr>
                        <td><a href="{% url 'country' c.pk %}">{{ c.name }}</a></td>
                        <td class="text-center">
                            {% if c.business %}<span class="text-success glyphicon glyphicon-ok"></span>{% endif %}
                        </td>
                        <td class="text-center">
                            {% if c.investor %}<span class="text-success glyphicon glyphicon-ok"></span>{% endif %}
                        </td>
                        <td class="text-center">
                            {% if c.pension %}<span class="text-success glyphicon glyphicon-ok"></span>{% endif %}
                        </td>
                        <td class="text-center">
                            {% if c.visa_run %}<span class="text-success glyphicon glyphicon-ok"></span>{% endif %}
                        </td>
                        <td class="text-center">
                            {% if c.specialist %}<span class="text-success glyphicon glyphicon-ok"></span>{% endif %}
                        </td>
                        <td class="text-center">{{ c.happiness|default:"" }}</td>
                        <td class="text-center">{{ c.prosperity|default:"" }}</td>
                        <td class="text-center">{{ c.medicine|default:"" }}</td>
                        <td class="text-center">{{ c.summer|default:"" }}</td>
                        <td class="text-center">{{ c.winter|default:"" }}</td>
                        <td class="text-center">
                            {% if c.mountains %}<span class="text-success glyphicon glyphicon-ok"></span>{% endif %}
                        </td>
                        <td class="text-center">
                            {% if c.sea  %}<span class="text-success glyphicon glyphicon-ok"></span>{% endif %}
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <div style="overflow-y: auto;"  id="countries_list">
        <table class="table table-bordered" >
            <thead>
                <tr>
                    <th rowspan="2">Страна</th>
                    <th colspan="5">Типы виз</th>
                    <th colspan="3">Индексы <small>(меньше - лучше)</small></th>
                    <th colspan="2">Температура</th>
                    <th colspan="2">Природа</th>
                </tr>
                <tr>
                    <th>Бизнес</th>
                    <th>Инвестиции</th>
                    <th>Рантье</th>
                    <th>Visa-run</th>
                    <th>Специалист</th>
                    <th><a href="https://ru.wikipedia.org/wiki/Международный_индекс_счастья">Счастья</a></th>
                    <th><a href="http://en.wikipedia.org/wiki/Legatum_Prosperity_Index">Prosperity</a></th>
                    <th><a href="http://en.wikipedia.org/wiki/World_Health_Organization_ranking_of_health_systems_in_2000">WHO rank</a></th>
                    <th>Летом</th>
                    <th>Зимой</th>
                    <th>Горы</th>
                    <th>Море</th>
                </tr>
            </thead>
            <tbody>
                {% for c in country_list %}
                    <tr>
                        <td><a href="{% url 'country' c.pk %}">{{ c.name }}</a></td>
                        <td class="text-center">
                            {% if c.business %}<span class="text-success glyphicon glyphicon-ok"></span>{% endif %}
                        </td>
                        <td class="text-center">
                            {% if c.investor %}<span class="text-success glyphicon glyphicon-ok"></span>{% endif %}
                        </td>
                        <td class="text-center">
                            {% if c.pension %}<span class="text-success glyphicon glyphicon-ok"></span>{% endif %}
                        </td>
                        <td class="text-center">
                            {% if c.visa_run %}<span class="text-success glyphicon glyphicon-ok"></span>{% endif %}
                        </td>
                        <td class="text-center">
                            {% if c.specialist %}<span class="text-success glyphicon glyphicon-ok"></span>{% endif %}
                        </td>
                        <td class="text-center">{{ c.happiness|default:"" }}</td>
                        <td class="text-center">{{ c.prosperity|default:"" }}</td>
                        <td class="text-center">{{ c.medicine|default:"" }}</td>
                        <td class="text-center">{{ c.summer|default:"" }}</td>
                        <td class="text-center">{{ c.winter|default:"" }}</td>
                        <td class="text-center">
                            {% if c.mountains %}<span class="text-success glyphicon glyphicon-ok"></span>{% endif %}
                        </td>
                        <td class="text-center">
                            {% if c.sea  %}<span class="text-success glyphicon glyphicon-ok"></span>{% endif %}
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% endblock content %}

{% block js %}
    <script>
        $(function() {
            var header_height = $('#countries_header thead').height();
            $('#countries_header').height(header_height + 'px');
            $('#countries_list table').css('margin-top', (0 - header_height) + 'px');
            $('#countries_list').height($(window).height() - 200);

            $(window).resize(function() {
                $('#countries_list').height($(window).height() - 200);
            });
        });
    </script>
{% endblock js %}